(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[109],{1437:function(e,a,t){"use strict";t.d(a,"a",(function(){return m}));var n=t(13),l=t(0),c=t.n(l),r=t(1196),o=t(1199),s=t(646),i=t(650),d=t(37),u=Object(r.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function m(e){var a=e.items,t=void 0===a?[]:a,l=e.fetchSelected;console.log("Data",l);var r=u(),m=c.a.useState(""),f=Object(n.a)(m,2),p=(f[0],f[1],Object(d.h)());return t.length<=0?"":c.a.createElement("div",null,c.a.createElement(s.a,{className:r.formControl},c.a.createElement(i.a,{value:null!==l&&void 0!==l?l:"all",onChange:function(e){console.log(e),p.push("/apps/dashboards/analytics/".concat(e.target.value),!0),window.location.reload(!1)},className:"campaigndropdown",inputProps:{"aria-label":""}},c.a.createElement(o.a,{value:"all"},"Select Campaign"),t&&t.map((function(e,a){return c.a.createElement(o.a,{key:a,value:e._id},e.name)})))))}},1617:function(e,a,t){"use strict";t.d(a,"a",(function(){return c})),t.d(a,"d",(function(){return r})),t.d(a,"b",(function(){return o})),t.d(a,"c",(function(){return s}));var n=t(0),l=(t(3),n.createContext(null));function c(e){var a=e.children,t=e.value,c=function(){var e=n.useState(null),a=e[0],t=e[1];return n.useEffect((function(){t("mui-p-".concat(Math.round(1e5*Math.random())))}),[]),a}(),r=n.useMemo((function(){return{idPrefix:c,value:t}}),[c,t]);return n.createElement(l.Provider,{value:r},a)}function r(){return n.useContext(l)}function o(e,a){return null===e.idPrefix?null:"".concat(e.idPrefix,"-P-").concat(a)}function s(e,a){return null===e.idPrefix?null:"".concat(e.idPrefix,"-T-").concat(a)}},1618:function(e,a,t){"use strict";var n=t(1),l=t(4),c=t(0),r=(t(3),t(1232)),o=t(1617),s=c.forwardRef((function(e,a){var t=e.children,s=Object(l.a)(e,["children"]),i=Object(o.d)();if(null===i)throw new TypeError("No TabContext provided");var d=c.Children.map(t,(function(e){return c.cloneElement(e,{"aria-controls":Object(o.b)(i,e.props.value),id:Object(o.c)(i,e.props.value)})}));return c.createElement(r.a,Object(n.a)({},s,{ref:a,value:i.value}),d)}));a.a=s},1619:function(e,a,t){"use strict";var n=t(1),l=t(4),c=t(0),r=(t(3),t(2)),o=t(8),s=t(1617),i=c.forwardRef((function(e,a){var t=e.children,o=e.className,i=e.classes,d=e.value,u=Object(l.a)(e,["children","className","classes","value"]),m=Object(s.d)();if(null===m)throw new TypeError("No TabContext provided");var f=Object(s.b)(m,d),p=Object(s.c)(m,d);return c.createElement("div",Object(n.a)({"aria-labelledby":p,className:Object(r.default)(i.root,o),hidden:d!==m.value,id:f,ref:a,role:"tabpanel"},u),d===m.value&&t)}));a.a=Object(o.a)((function(e){return{root:{padding:e.spacing(3)}}}),{name:"MuiTabPanel"})(i)},2678:function(e,a,t){"use strict";t.r(a);var n=t(19),l=t.n(n),c=t(42),r=t(13),o=t(125),s=t(242),i=t(0),d=t.n(i),u=t(5),m=t(7),f=t(37),p=t(1344),E=t.n(p),b=t(108),v=t(29),g=t(20),h=t(46),w=t.n(h),x=Object(g.b)("analyticsDashboardApp/widgets/getWidgets",Object(c.a)(l.a.mark((function e(){var a,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/api/analytics-dashboard-app/widgets");case 2:return a=e.sent,e.next=5,a.data;case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),N=Object(g.c)({}),j=N.getSelectors((function(e){return e.analyticsDashboardApp.widgets})),O=j.selectEntities,y=(j.selectById,Object(g.d)({name:"analyticsDashboardApp/widgets",initialState:N.getInitialState({}),reducers:{},extraReducers:Object(v.a)({},x.fulfilled,N.setAll)}).reducer),C=Object(b.c)({widgets:y}),k=t(1228),S=t(44),A=t(209),I=t(139);var F=d.a.memo((function(e){Object(S.a)();var a=m.a.merge({},e.data);return d.a.createElement(k.a,{className:"w-full rounded-8 shadow-1"},d.a.createElement("div",{className:"p-16 pb-0 flex flex-row flex-wrap items-end"},d.a.createElement("div",{className:""},d.a.createElement(A.a,{className:"h3",color:"textSecondary"},"Total Contacts"),d.a.createElement(A.a,{className:"text-40 font-300 leading-none mt-8"},a.totalCount),d.a.createElement("br",null),d.a.createElement("br",null))))}));var P=d.a.memo((function(e){Object(S.a)();var a,t,n=m.a.merge({},e.data),l=null!==(a=Math.round((null!==(t=n.openedCount)&&void 0!==t?t:0)/n.totalCount))&&void 0!==a?a:0;return isNaN(l)&&(l=0),d.a.createElement(k.a,{className:"w-full rounded-8 shadow-1"},d.a.createElement("div",{className:"p-16 pb-0 flex flex-row flex-wrap items-end"},d.a.createElement("div",{className:""},d.a.createElement(A.a,{className:"h3",color:"textSecondary"},"Opened"),d.a.createElement(A.a,{className:"text-40 font-300 leading-none mt-8"},n.openedCount," / ",l,"%"))))}));var D=d.a.memo((function(e){Object(S.a)();var a,t,n=m.a.merge({},e.data),l=Math.round(null!==(a=(null!==(t=n.repliedCount)&&void 0!==t?t:0)/n.totalCount)&&void 0!==a?a:0);return isNaN(l)&&(l=0),d.a.createElement(k.a,{className:"w-full rounded-8 shadow-1"},d.a.createElement("div",{className:"p-16 pb-0 flex flex-row flex-wrap items-end"},d.a.createElement("div",{className:""},d.a.createElement(A.a,{className:"h3",color:"textSecondary"},"Replied"),d.a.createElement(A.a,{className:"text-40 font-300 leading-none mt-8"},n.repliedCount," / ",l,"%"))))})),B=t(9),R=t(1202),T=t(85);var L=d.a.memo((function(e,a){console.log("New Props",e);var t=d.a.useState(),n=Object(r.a)(t,2),o=n[0],s=n[1],u=d.a.useState({loading:!0}),f=Object(r.a)(u,2),p=f[0],b=f[1];Object(i.useEffect)((function(){Object(c.a)(l.a.mark((function a(){var t,n,c,r,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("token"),a.next=3,fetch("".concat("http://13.58.82.135/api/api/","leads/getGraphData/").concat(null!==(t=e.data)&&void 0!==t?t:0),{headers:{Authorization:n}});case 3:return c=a.sent,a.next=6,c.json();case 6:r=a.sent,o=r.data,s(o),b({loading:!1});case 10:case"end":return a.stop()}}),a)})))()}),[]);var v=Object(S.a)(),g=Object(i.useState)("today"),h=Object(r.a)(g,2),w=h[0],x=h[1];return void 0!==o&&null!==o?(m.a.setWith(o,"options.scales.xAxes[0].ticks.fontColor",v.palette.text.secondary),m.a.setWith(o,"options.scales.yAxes[0].ticks.fontColor",v.palette.text.secondary),m.a.setWith(o,"options.scales.yAxes[0].gridLines.color",Object(T.fade)(v.palette.text.secondary,.1)),p.loading?d.a.createElement(E.a,{type:"Puff",color:"#00BFFF",height:100,width:100}):d.a.createElement(k.a,{className:"w-full rounded-8 shadow-1"},d.a.createElement("div",{className:"relative p-24 flex flex-row items-center justify-between"},d.a.createElement("div",{className:"flex flex-col"},d.a.createElement(A.a,{className:"h3 sm:h2"},"Count of Sent At/Count of Replied At")),d.a.createElement("div",{className:"flex flex-row items-center"},Object.keys(o.datasets).map((function(e){return d.a.createElement(R.a,{key:e,className:"py-8 px-12",size:"small",onClick:function(){return x(e)},disabled:e===w},e)})))),d.a.createElement(A.a,{className:"relative h-200 sm:h-320 sm:pb-16"},d.a.createElement(I.Line,{data:{labels:o.labels,datasets:o.datasets[w].map((function(e,a){var t=v.palette[0===a?"primary":"secondary"];return Object(B.a)(Object(B.a)({},e),{},{borderColor:t.main,backgroundColor:t.main,pointBackgroundColor:t.dark,pointHoverBackgroundColor:t.main,pointBorderColor:t.contrastText,pointHoverBorderColor:t.contrastText})}))},options:o.options})))):""})),M=t(1196),W=t(1219),z=t(1231),U=t(1617),G=t(1618),J=t(1619);var H=d.a.memo((function(e,a){var t=d.a.useState(),n=Object(r.a)(t,2),o=n[0],s=n[1],u=d.a.useState({loading:!0}),m=Object(r.a)(u,2),f=m[0],p=m[1];return Object(i.useEffect)((function(){Object(c.a)(l.a.mark((function a(){var t,n,c,r,o;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=localStorage.getItem("token"),a.next=3,fetch("".concat("http://13.58.82.135/api/api/","leads/get/label/").concat(null!==(t=e.Data.campaignId)&&void 0!==t?t:0,"/").concat(e.Data.label),{headers:{Authorization:n}});case 3:return c=a.sent,a.next=6,c.json();case 6:r=a.sent,o=r.data,s(o),p({loading:!1});case 10:case"end":return a.stop()}}),a)})))()}),[]),Object(S.a)(),void 0!==o&&null!==o?f.loading?d.a.createElement(E.a,{type:"Puff",color:"#00BFFF",height:100,width:100}):d.a.createElement(k.a,{className:"w-full rounded-8 shadow-1"},d.a.createElement("div",{className:"relative p-24 flex flex-row items-center justify-between scrollsmarttable"},d.a.createElement("table",{className:"smarttable"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("td",null,"Email"),d.a.createElement("td",null,"Title"),d.a.createElement("td",null,"First Name"),d.a.createElement("td",null,"Last Name"),d.a.createElement("td",null,"Campaign Name"),d.a.createElement("td",null,"Phone"),d.a.createElement("td",null,"Linkedin Url"),d.a.createElement("td",null,"Company Name"),d.a.createElement("td",null,"Icebreaker"),d.a.createElement("td",null,"Job Title"),d.a.createElement("td",null,"Website"),d.a.createElement("td",null,"Industry"),d.a.createElement("td",null,"LinkedIn"),d.a.createElement("td",null,"Full Name"),d.a.createElement("td",null,"Location"),d.a.createElement("td",null,"Sent Step"),d.a.createElement("td",null,"Sent At"),d.a.createElement("td",null,"Replied At"),d.a.createElement("td",null,"Opened At"),d.a.createElement("td",null,"Bounced At"),d.a.createElement("td",null,"Unsubscribed At"),d.a.createElement("td",null,"Clicked At"),d.a.createElement("td",null,"Gmail Label"))),d.a.createElement("tbody",null,o.map((function(e,a){return d.a.createElement("tr",null,d.a.createElement("td",null,e.email),d.a.createElement("td",null,e.title),d.a.createElement("td",null,e.firstName),d.a.createElement("td",null,e.lastName),d.a.createElement("td",null,e.campaignName),d.a.createElement("td",null,e.phone),d.a.createElement("td",null,e.linkedinUrl),d.a.createElement("td",null,e.companyName),d.a.createElement("td",null,e.icebreaker),d.a.createElement("td",null,e.jobTitle),d.a.createElement("td",null,e.website),d.a.createElement("td",null,e.industry),d.a.createElement("td",null,e.linkedin),d.a.createElement("td",null,e.fullName),d.a.createElement("td",null,e.location),d.a.createElement("td",null,e.sentStep),d.a.createElement("td",null,e.sentAt),d.a.createElement("td",null,e.repliedAt),d.a.createElement("td",null,e.openedAt),d.a.createElement("td",null,e.bouncedAt),d.a.createElement("td",null,e.unsubscribedAt),d.a.createElement("td",null,e.clickedAt),d.a.createElement("td",null,e.flag))})))))):""})),_=Object(M.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}}));function q(e,a){var t=_(),n=d.a.useState("1"),l=Object(r.a)(n,2),c=l[0],o=l[1],s="",i="",u="",m="";try{e.data.data1.tableResp.forEach((function(a){var t=(100*a.count/e.data.data1.totalCount).toFixed(2);"FB - Deferred Interest"===a.flag?u="Deferred Interest - ".concat(a.count,"/").concat(t,"%"):"FB - Polite Decline"===a.flag?m="Polite Decline ".concat(a.count,"/").concat(t,"%"):"FB - Positive Response"===a.flag?s="Positive Response - ".concat(a.count,"/").concat(t,"%"):"FB - Referral"===a.flag&&(i="Referral - ".concat(a.count,"/").concat(t,"%"))}))}catch(f){console.log(f)}return d.a.createElement("div",{className:t.root},d.a.createElement(U.a,{value:c},d.a.createElement(W.a,{position:"static"},d.a.createElement(G.a,{onChange:function(e,a){o(a)},"aria-label":"simple tabs example"},d.a.createElement(z.a,{label:s,value:"1"}),d.a.createElement(z.a,{label:i,value:"2"}),d.a.createElement(z.a,{label:u,value:"3"}),d.a.createElement(z.a,{label:m,value:"4"}))),d.a.createElement(J.a,{value:"1"},d.a.createElement(H,{Data:{label:"FB - Positive Response",campaignId:e.data.campaignId}})),d.a.createElement(J.a,{value:"2"},d.a.createElement(H,{Data:{label:"FB - Referral",campaignId:e.data.campaignId}})),d.a.createElement(J.a,{value:"3"},d.a.createElement(H,{Data:{label:"FB - Deferred Interest",campaignId:e.data.campaignId}})),d.a.createElement(J.a,{value:"4"},d.a.createElement(H,{Data:{label:"FB - Polite Decline",campaignId:e.data.campaignId}}))))}var K=d.a.memo((function(e){Object(S.a)();var a=m.a.merge({},e.data),t=Math.round(100*a.clickedCount/a.totalCount);return isNaN(t)&&(t=0),d.a.createElement(k.a,{className:"w-full rounded-8 shadow-1"},d.a.createElement("div",{className:"p-16 pb-0 flex flex-row flex-wrap items-end"},d.a.createElement("div",{className:""},d.a.createElement(A.a,{className:"h3",color:"textSecondary"},"Clicked"),d.a.createElement(A.a,{className:"text-40 font-300 leading-none mt-8"},a.clickedCount," / ",d.a.createElement("br",null)," ",t,"%"))))})),Q=t(1437);a.default=Object(s.a)("analyticsDashboardApp",C)((function(){var e=Object(u.c)(),a=d.a.useState([]),t=Object(r.a)(a,2),n=t[0],s=t[1],p=d.a.useState(0),b=Object(r.a)(p,2),v=(b[0],b[1],d.a.useState("")),g=Object(r.a)(v,2),h=g[0],w=g[1],N=Object(u.d)(O),j=d.a.useState(!1),y=Object(r.a)(j,2),C=(y[0],y[1],d.a.useState({loading:!0})),k=Object(r.a)(C,2),S=k[0],A=k[1],I=Object(f.j)();return Object(i.useEffect)((function(){Object(c.a)(l.a.mark((function e(){var a,t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,fetch("".concat("http://13.58.82.135/api/api/","leads/total/").concat(I.id),{headers:{Authorization:a}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c=n.data,s(c),A({loading:!1});case 10:case"end":return e.stop()}}),e)})))(),Object(c.a)(l.a.mark((function e(){var a,t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,fetch("".concat("http://13.58.82.135/api/api/","leads/allCampaigns"),{headers:{Authorization:a}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c=n.data,w(c);case 9:case"end":return e.stop()}}),e)})))()}),[]),Object(i.useEffect)((function(){e(x())}),[e]),m.a.isEmpty(N)?null:S.loading?d.a.createElement(E.a,{type:"Puff",color:"#00BFFF",height:100,width:100}):d.a.createElement("div",{className:"w-full"},d.a.createElement(o.a,{animation:"transition.slideUpIn",delay:200},d.a.createElement("div",{className:"flex flex-col md:flex-row sm:p-8 container"},d.a.createElement("div",{className:"flex flex-1 flex-col min-w-0"},d.a.createElement("div",{className:"flex flex-col sm:flex sm:flex-row pb-32"},d.a.createElement("div",{className:"widget sm:w-1/6 p-16"},d.a.createElement("div",{className:"widget"},d.a.createElement(Q.a,{fetchSelected:I.id,items:h}))),d.a.createElement("div",{className:"widget sm:w-1/6 p-16"},d.a.createElement("div",{className:"widget"},d.a.createElement(F,{data:n})),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("div",{className:"widget"},d.a.createElement(P,{data:n}))),d.a.createElement("div",{className:"widget sm:w-1/6 p-16"},d.a.createElement("div",{className:"widget"},d.a.createElement(D,{data:n})),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("div",{className:"widget"},d.a.createElement(K,{data:n}))),d.a.createElement("div",{className:"widget sm:w-1/2 p-16"},d.a.createElement("div",{className:"widget w-full"},d.a.createElement(L,{data:I.id})))),d.a.createElement("div",null,d.a.createElement(q,{data:{campaignId:I.id,data1:n}}))))))}))}}]);